<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®€çº¦æµè§ˆå™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background-color: #fff;
            color: #333;
            height: 100vh;
            overflow: hidden;
        }
        
        /* æµè§ˆå™¨å®¹å™¨ */
        .browser-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
        }
        
        /* åœ°å€æ åŒºåŸŸ */
        .url-bar {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background-color: #fff;
            border-bottom: 1px solid #e0e0e0;
            gap: 8px;
            flex-shrink: 0;
            height: 56px;
        }
        
        /* æ§åˆ¶æŒ‰é’® */
        .control-buttons {
            display: flex;
            gap: 4px;
        }
        
        .control-btn {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
        }
        
        .close-btn { background-color: #ff5f57; }
        .minimize-btn { background-color: #ffbd2e; }
        .maximize-btn { background-color: #28ca42; }
        
        /* åœ°å€è¾“å…¥æ¡† */
        .url-input-container {
            flex: 1;
            display: flex;
            align-items: center;
            background-color: #f5f5f5;
            border-radius: 8px;
            padding: 8px 12px;
            gap: 8px;
            min-width: 0; /* é˜²æ­¢å†…å®¹æº¢å‡º */
        }
        
        .url-icon {
            width: 16px;
            height: 16px;
            opacity: 0.6;
            flex-shrink: 0;
        }
        
        .url-input {
            flex: 1;
            border: none;
            background: transparent;
            font-size: 14px;
            color: #333;
            outline: none;
            min-width: 0; /* é˜²æ­¢è¾“å…¥æ¡†æº¢å‡º */
            width: 100%;
        }
        
        .url-input::placeholder {
            color: #999;
        }
        
        /* å·¥å…·æŒ‰é’® */
        .tool-buttons {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }
        
        .tool-btn {
            background: none;
            border: none;
            width: 24px;
            height: 24px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .tool-btn:hover {
            opacity: 1;
        }
        
        /* å†…å®¹åŒºåŸŸå®¹å™¨ */
        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 0; /* é‡è¦ï¼šè®©flexå­å…ƒç´ æ­£ç¡®æ”¶ç¼© */
        }
        
        /* æ ‡ç­¾é¡µåŒºåŸŸ */
        .tabs-container {
            flex-shrink: 0;
            background-color: #fff;
            border-bottom: 1px solid #e0e0e0;
            overflow: hidden;
        }
        
        .tabs {
            display: flex;
            overflow-x: auto;
            overflow-y: hidden;
            height: 42px;
        }
        
        .tab {
            display: flex;
            align-items: center;
            padding: 10px 16px;
            min-width: 120px;
            max-width: 200px;
            border-right: 1px solid #e0e0e0;
            background-color: #fff;
            cursor: pointer;
            gap: 8px;
            flex-shrink: 0;
            height: 100%;
            box-sizing: border-box;
        }
        
        .tab.active {
            background-color: #f8f9fa;
            position: relative;
        }
        
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #0066cc;
        }
        
        .tab-favicon {
            width: 16px;
            height: 16px;
            flex-shrink: 0;
        }
        
        .tab-title {
            flex: 1;
            font-size: 13px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            min-width: 0; /* å…è®¸æ–‡æœ¬æº¢å‡ºæ—¶æ­£ç¡®çœç•¥ */
        }
        
        .tab-close {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            opacity: 0;
            transition: opacity 0.2s;
            flex-shrink: 0;
        }
        
        .tab:hover .tab-close {
            opacity: 0.5;
        }
        
        .tab-close:hover {
            background-color: #e0e0e0;
            opacity: 1;
        }
        
        /* æ–°æ ‡ç­¾é¡µæŒ‰é’® */
        .new-tab-btn {
            width: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            color: #666;
            flex-shrink: 0;
            padding: 0 8px;
        }
        
        /* æµè§ˆå™¨å†…å®¹åŒºåŸŸ */
        .browser-content-container {
            flex: 1;
            position: relative;
            background-color: #fff;
            min-height: 0; /* é‡è¦ï¼šè®©flexå­å…ƒç´ æ­£ç¡®æ”¶ç¼© */
            overflow: hidden;
        }
        
        .browser-frame {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
        }
        
        /* çŠ¶æ€æ  */
        .status-bar {
            padding: 4px 16px;
            background-color: #fff;
            border-top: 1px solid #e0e0e0;
            font-size: 12px;
            color: #666;
            display: flex;
            justify-content: space-between;
            flex-shrink: 0;
            height: 24px;
        }
        
        /* å ä½å†…å®¹ */
        .placeholder-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            width: 100%;
            color: #999;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
        
        .placeholder-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
        
        .placeholder-text {
            font-size: 16px;
            margin-bottom: 8px;
        }
        
        .placeholder-subtext {
            font-size: 14px;
            color: #ccc;
        }
        
        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #ddd;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #ccc;
        }
        
        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
        .tabs::-webkit-scrollbar {
            height: 3px;
        }
        
        .tabs::-webkit-scrollbar-thumb {
            background: #ccc;
        }
    </style>
</head>
<body>
    <div class="browser-container">
        <!-- åœ°å€æ  -->
        <div class="url-bar">
            <div class="control-buttons">
                <button class="control-btn close-btn"></button>
                <button class="control-btn minimize-btn"></button>
                <button class="control-btn maximize-btn"></button>
            </div>
            
            <div class="url-input-container">
                <svg class="url-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                </svg>
                <input type="text" class="url-input" placeholder="è¾“å…¥ç½‘å€æˆ–æœç´¢å†…å®¹" value="https://www.baidu.com">
            </div>
            
            <div class="tool-buttons">
                <button class="tool-btn" id="refreshBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="23 4 23 10 17 10"></polyline>
                        <polyline points="1 20 1 14 7 14"></polyline>
                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                    </svg>
                </button>
                <button class="tool-btn" id="homeBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- æ ‡ç­¾é¡µåŒºåŸŸ -->
        <div class="tabs-container">
            <div class="tabs">
                <div class="tab active">
                    <div class="tab-favicon">ğŸŒ</div>
                    <div class="tab-title">ç™¾åº¦</div>
                    <div class="tab-close">Ã—</div>
                </div>
                <div class="new-tab-btn" id="newTabBtn">+</div>
            </div>
        </div>
        
        <!-- å†…å®¹åŒºåŸŸ -->
        <div class="content-area">
            <div class="browser-content-container">
                <iframe class="browser-frame" id="browserFrame" src="about:blank" frameborder="0"></iframe>
                <div class="placeholder-content" id="placeholder">
                    <div class="placeholder-icon">ğŸŒ</div>
                    <div class="placeholder-text">ç®€çº¦æµè§ˆå™¨</div>
                    <div class="placeholder-subtext">è¾“å…¥ç½‘å€å¼€å§‹æµè§ˆ</div>
                </div>
            </div>
        </div>
        
        <!-- çŠ¶æ€æ  -->
        <div class="status-bar">
            <div id="statusText">å‡†å¤‡å°±ç»ª</div>
            <div id="securityInfo">ğŸ”’ å®‰å…¨è¿æ¥</div>
        </div>
    </div>

    <script>
        // DOM å…ƒç´ 
        const urlInput = document.querySelector('.url-input');
        const browserFrame = document.getElementById('browserFrame');
        const placeholder = document.getElementById('placeholder');
        const refreshBtn = document.getElementById('refreshBtn');
        const homeBtn = document.getElementById('homeBtn');
        const newTabBtn = document.getElementById('newTabBtn');
        const tabsContainer = document.querySelector('.tabs');
        const statusText = document.getElementById('statusText');
        
        // å½“å‰æ´»åŠ¨æ ‡ç­¾é¡µ
        let currentTab = 0;
        
        // æ ‡ç­¾é¡µæ•°æ®
        const tabData = [
            { id: 0, title: "ç™¾åº¦", url: "https://www.baidu.com", favicon: "ğŸŒ" }
        ];
        
        // åˆå§‹åŒ–
        function init() {
            // åŠ è½½åˆå§‹é¡µé¢
            updateBrowserContent('https://www.baidu.com');
            setupEventListeners();
            
            // åˆå§‹æ˜¾ç¤ºiframe
            browserFrame.style.display = 'block';
            placeholder.style.display = 'none';
        }
        
        // è®¾ç½®äº‹ä»¶ç›‘å¬
        function setupEventListeners() {
            // åœ°å€è¾“å…¥æ¡†å›è½¦äº‹ä»¶
            urlInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    navigateToUrl(urlInput.value);
                }
            });
            
            // åˆ·æ–°æŒ‰é’®
            refreshBtn.addEventListener('click', () => {
                if (browserFrame.src && browserFrame.src !== 'about:blank') {
                    browserFrame.contentWindow.location.reload();
                    updateStatus('é‡æ–°åŠ è½½ä¸­...');
                }
            });
            
            // ä¸»é¡µæŒ‰é’®
            homeBtn.addEventListener('click', () => {
                navigateToUrl('https://www.baidu.com');
            });
            
            // æ–°æ ‡ç­¾é¡µæŒ‰é’®
            newTabBtn.addEventListener('click', createNewTab);
            
            // æ¨¡æ‹Ÿçª—å£æ§åˆ¶æŒ‰é’®
            document.querySelector('.close-btn').addEventListener('click', () => {
                if (confirm('ç¡®å®šè¦å…³é—­æµè§ˆå™¨å—ï¼Ÿ')) {
                    document.body.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100vh;font-size:18px;color:#666;">æµè§ˆå™¨å·²å…³é—­</div>';
                }
            });
            
            document.querySelector('.minimize-btn').addEventListener('click', () => {
                alert('æµè§ˆå™¨å·²æœ€å°åŒ–ï¼ˆæ¨¡æ‹Ÿï¼‰');
            });
            
            document.querySelector('.maximize-btn').addEventListener('click', () => {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch(err => {
                        console.log(`å…¨å±è¯·æ±‚å¤±è´¥: ${err.message}`);
                    });
                } else {
                    document.exitFullscreen();
                }
            });
            
            // åˆå§‹æ ‡ç­¾é¡µç‚¹å‡»äº‹ä»¶
            document.querySelector('.tab').addEventListener('click', () => {
                setActiveTab(0);
            });
            
            document.querySelector('.tab .tab-close').addEventListener('click', (e) => {
                e.stopPropagation();
                closeTab(0);
            });
            
            // iframeåŠ è½½äº‹ä»¶
            browserFrame.addEventListener('load', () => {
                updateStatus('é¡µé¢åŠ è½½å®Œæˆ');
                try {
                    // å°è¯•æ›´æ–°æ ‡ç­¾é¡µæ ‡é¢˜
                    const iframeDoc = browserFrame.contentDocument || browserFrame.contentWindow.document;
                    const title = iframeDoc.title || getPageTitleFromUrl(browserFrame.src);
                    updateTabData(currentTab, { title: title });
                } catch (e) {
                    // è·¨åŸŸé™åˆ¶ï¼Œä½¿ç”¨URLä½œä¸ºæ ‡é¢˜
                    updateTabData(currentTab, { title: getPageTitleFromUrl(browserFrame.src) });
                }
            });
        }
        
        // å¯¼èˆªåˆ°æŒ‡å®šURL
        function navigateToUrl(url) {
            let fullUrl = url;
            
            // å¦‚æœè¾“å…¥çš„ä¸æ˜¯å®Œæ•´çš„URLï¼Œåˆ¤æ–­æ˜¯ç½‘å€è¿˜æ˜¯æœç´¢è¯
            if (!url.startsWith('http://') && !url.startsWith('https://') && !url.startsWith('about:')) {
                if (url.includes('.') && !url.includes(' ')) {
                    // çœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªåŸŸå
                    fullUrl = 'https://' + url;
                } else {
                    // å¦åˆ™å½“ä½œæœç´¢è¯å¤„ç†ï¼Œä½¿ç”¨ç™¾åº¦æœç´¢
                    fullUrl = 'https://www.baidu.com/s?wd=' + encodeURIComponent(url);
                }
            }
            
            urlInput.value = fullUrl;
            updateBrowserContent(fullUrl);
            updateTabData(currentTab, { url: fullUrl, title: 'åŠ è½½ä¸­...' });
            updateStatus('æ­£åœ¨åŠ è½½...');
        }
        
        // æ›´æ–°æµè§ˆå™¨å†…å®¹
        function updateBrowserContent(url) {
            if (url === 'about:blank') {
                browserFrame.style.display = 'none';
                placeholder.style.display = 'flex';
                updateTabData(currentTab, { 
                    title: 'æ–°æ ‡ç­¾é¡µ',
                    favicon: 'ï¼‹'
                });
            } else {
                try {
                    browserFrame.style.display = 'block';
                    placeholder.style.display = 'none';
                    browserFrame.src = url;
                    
                    // æ›´æ–°æ ‡ç­¾é¡µæ•°æ®
                    updateTabData(currentTab, { 
                        title: getPageTitleFromUrl(url),
                        favicon: 'ğŸŒ'
                    });
                } catch (error) {
                    updateStatus('åŠ è½½å¤±è´¥: ' + error.message);
                    browserFrame.style.display = 'none';
                    placeholder.style.display = 'flex';
                }
            }
        }
        
        // ä»URLè·å–é¡µé¢æ ‡é¢˜
        function getPageTitleFromUrl(url) {
            try {
                const urlObj = new URL(url);
                let hostname = urlObj.hostname.replace('www.', '');
                
                // ç‰¹æ®Šå¤„ç†å¸¸è§ç½‘ç«™
                if (hostname.includes('baidu.com')) return 'ç™¾åº¦';
                if (hostname.includes('bing.com')) return 'å¿…åº”';
                if (hostname.includes('duckduckgo.com')) return 'DuckDuckGo';
                if (hostname.includes('zhihu.com')) return 'çŸ¥ä¹';
                if (hostname.includes('bilibili.com')) return 'Bç«™';
                
                // å°†é¦–å­—æ¯å¤§å†™
                hostname = hostname.split('.')[0];
                hostname = hostname.charAt(0).toUpperCase() + hostname.slice(1);
                return hostname;
            } catch {
                return 'æ–°æ ‡ç­¾é¡µ';
            }
        }
        
        // åˆ›å»ºæ–°æ ‡ç­¾é¡µ
        function createNewTab() {
            const newTabId = Date.now();
            tabData.push({
                id: newTabId,
                title: 'æ–°æ ‡ç­¾é¡µ',
                url: 'about:blank',
                favicon: 'ï¼‹'
            });
            
            const tabElement = document.createElement('div');
            tabElement.className = 'tab';
            tabElement.innerHTML = `
                <div class="tab-favicon">ï¼‹</div>
                <div class="tab-title">æ–°æ ‡ç­¾é¡µ</div>
                <div class="tab-close">Ã—</div>
            `;
            
            // æ’å…¥åˆ°æ–°æ ‡ç­¾é¡µæŒ‰é’®ä¹‹å‰
            tabsContainer.insertBefore(tabElement, newTabBtn);
            
            // è®¾ç½®æ–°æ ‡ç­¾é¡µä¸ºæ´»åŠ¨çŠ¶æ€
            setActiveTab(newTabId);
            
            // æ·»åŠ äº‹ä»¶ç›‘å¬
            tabElement.addEventListener('click', () => setActiveTab(newTabId));
            tabElement.querySelector('.tab-close').addEventListener('click', (e) => {
                e.stopPropagation();
                closeTab(newTabId);
            });
            
            // æ¸…ç©ºåœ°å€æ å¹¶æ˜¾ç¤ºå ä½ç¬¦
            urlInput.value = '';
            browserFrame.style.display = 'none';
            placeholder.style.display = 'flex';
            updateStatus('æ–°æ ‡ç­¾é¡µ');
        }
        
        // è®¾ç½®æ´»åŠ¨æ ‡ç­¾é¡µ
        function setActiveTab(tabId) {
            // æ›´æ–°æ‰€æœ‰æ ‡ç­¾é¡µçš„activeçŠ¶æ€
            document.querySelectorAll('.tab').forEach((tab, index) => {
                if (tabData[index] && tabData[index].id === tabId) {
                    tab.classList.add('active');
                    currentTab = index;
                    
                    // æ›´æ–°åœ°å€æ å’Œå†…å®¹
                    const tab = tabData[index];
                    urlInput.value = tab.url;
                    
                    if (tab.url === 'about:blank') {
                        browserFrame.style.display = 'none';
                        placeholder.style.display = 'flex';
                        updateStatus('æ–°æ ‡ç­¾é¡µ');
                    } else {
                        updateBrowserContent(tab.url);
                    }
                } else {
                    tab.classList.remove('active');
                }
            });
        }
        
        // å…³é—­æ ‡ç­¾é¡µ
        function closeTab(tabId) {
            if (tabData.length <= 1) {
                alert('è‡³å°‘éœ€è¦ä¿ç•™ä¸€ä¸ªæ ‡ç­¾é¡µ');
                return;
            }
            
            const tabIndex = tabData.findIndex(tab => tab.id === tabId);
            if (tabIndex !== -1) {
                // ç§»é™¤æ ‡ç­¾é¡µæ•°æ®
                tabData.splice(tabIndex, 1);
                
                // ç§»é™¤DOMå…ƒç´ 
                const tabElements = document.querySelectorAll('.tab');
                if (tabElements[tabIndex]) {
                    tabElements[tabIndex].remove();
                }
                
                // æ¿€æ´»å‰ä¸€ä¸ªæ ‡ç­¾é¡µ
                if (currentTab >= tabData.length) {
                    currentTab = tabData.length - 1;
                }
                
                if (tabData[currentTab]) {
                    setActiveTab(tabData[currentTab].id);
                }
            }
        }
        
        // æ›´æ–°æ ‡ç­¾é¡µæ•°æ®
        function updateTabData(tabIndex, data) {
            if (tabData[tabIndex]) {
                Object.assign(tabData[tabIndex], data);
                
                // æ›´æ–°æ ‡ç­¾é¡µæ˜¾ç¤º
                const tabElements = document.querySelectorAll('.tab');
                if (tabElements[tabIndex]) {
                    if (data.title) {
                        tabElements[tabIndex].querySelector('.tab-title').textContent = data.title;
                    }
                    if (data.favicon) {
                        tabElements[tabIndex].querySelector('.tab-favicon').textContent = data.favicon;
                    }
                }
            }
        }
        
        // æ›´æ–°çŠ¶æ€æ 
        function updateStatus(message) {
            statusText.textContent = message;
        }
        
        // åˆå§‹åŒ–æµè§ˆå™¨
        init();
    </script>
</body>
</html>